<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Part 4: Working with Data</title>
    <meta charset="utf-8" />
    <meta name="author" content="Michael Kane School of Public Health, Biostatistics Department Yale University  " />
    <script src="part-4_files/header-attrs-2.5/header-attrs.js"></script>
    <link href="part-4_files/remark-css-0.0.1/duke-blue.css" rel="stylesheet" />
    <link href="part-4_files/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <link href="part-4_files/remark-css-0.0.1/tamu-fonts.css" rel="stylesheet" />
    <link href="part-4_files/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
    <link href="part-4_files/panelset-0.2.4/panelset.css" rel="stylesheet" />
    <script src="part-4_files/panelset-0.2.4/panelset.js"></script>
    <script src="part-4_files/htmlwidgets-1.5.2/htmlwidgets.js"></script>
    <script src="part-4_files/jquery-1.12.4/jquery.min.js"></script>
    <link href="part-4_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="part-4_files/datatables-binding-0.16/datatables.js"></script>
    <link href="part-4_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="part-4_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="part-4_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="part-4_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
    <script src="part-4_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Part 4: Working with Data
### Michael Kane<br><span style = 'font-size: 80%;'>School of Public Health, Biostatistics Department<br>Yale University<br><br>
### <i class="fab  fa-github "></i> <a href="https://github.com/kaneplusplus">kaneplusplus</a><br> <i class="fab  fa-twitter "></i> <a href="https://twitter.com/kaneplusplus">kaneplusplus</a>

---




# &lt;br&gt; Overview of Part 4

--
&lt;br&gt;

## Highlights from Part 3

--
&lt;br&gt;

### Generators

--
&lt;br&gt;

### Classes and Objects 

---

# &lt;br&gt; Overview of Part 4 

&lt;br&gt;

### Importing Data with Pandas

--
&lt;br&gt;

### Data Cleaning

--
&lt;br&gt;

### Data Exploration

--
&lt;br&gt;

### Pricing Wine

--
&lt;br&gt;

### R's R6 Object System

--
&lt;br&gt;

### Calling Python from R

---

# &lt;br&gt; Importing Data with Pandas 

&lt;br&gt;


```python
# Python 
import numpy as np
import pandas as pd
import plotnine
from plotnine import *

plotnine.options.figure_size = (4, 2)

wine = pd.read_csv("winemag-data-130k-v2.csv")

wine = wine.drop('Unnamed: 0', axis = 1)

# How many rows?
wine.shape[0]
```

```
## 129971
```

---

# &lt;br&gt; Importing Data with Pandas

&lt;br&gt;

## Accessing columns

--


```python
# Python

# What are the column names?
wine.keys()
```

```
## Index(['country', 'description', 'designation', 'points', 'price', 'province',
##        'region_1', 'region_2', 'taster_name', 'taster_twitter_handle', 'title',
##        'variety', 'winery'],
##       dtype='object')
```

---

# &lt;br&gt; Data Cleaning 

&lt;br&gt;

## Dealing with Missing Data

--


```python
# How many missing countries?
wine[ ~ wine['country'].isnull() ].shape[0]

# Drop them
```

```
## 129908
```

```python
wine = wine[ ~ wine['country'].isnull() ]
wine.shape
```

```
## (129908, 13)
```

---

# &lt;br&gt; Data Cleaning

&lt;br&gt;

## How many wineries and countries?

--


```python
# How many unique wineries?
len(wine['winery'].unique())

# How many countries?
```

```
## 16745
```

```python
len(wine['country'].unique())
```

```
## 43
```

---

# &lt;br&gt; Data Exploration 

&lt;br&gt;

## Visualizing Country Counts

--


```python
# Make country categorical, ordered by count.
country_list = wine['country'].value_counts().index.tolist()
country_cat = pd.Categorical(wine['country'], categories = country_list)
wine = wine.assign(country_cat = country_cat)

# Where are the wines from?
p = (ggplot(wine, aes(x = "country_cat")) +
      theme(axis_text_x=element_text(rotation=270, hjust=1)) +
      geom_histogram())
p.draw()
```

---

# &lt;br&gt; Data Exploration 

&lt;br&gt;

## Where do the wines come from?

--


```python

# Make country categorical, ordered by count.
country_list = wine['country'].value_counts().index.tolist()
country_cat = pd.Categorical(wine['country'], categories = country_list)
wine = wine.assign(country_cat = country_cat)

# Where are the wines from?
p = (ggplot(wine, aes(x = "country_cat")) +
      theme(axis_text_x=element_text(rotation=270, hjust=1)) +
      geom_histogram() +
      theme(subplots_adjust={'bottom': .3}))

# p.draw()
```

---

# &lt;br&gt; Data Exploration 

&lt;br&gt;

## How much do they cost?

--


```python
p = (ggplot(wine, aes(x = "price")) +
        theme(axis_text_x=element_text(rotation=270, hjust=1)) +
        geom_histogram() +
        theme(subplots_adjust={'bottom': .3}))

# p.draw()
```

---

# &lt;br&gt; Data Exploration

&lt;br&gt;

## Switching to the log scale 

--


```python
import warnings
warnings.filterwarnings("ignore")

# Let's log. Get rid of NaN's first.
wine = wine[ ~ wine['price'].isna() ]
wine = wine.assign(log_price = np.log(wine['price']))

p = (ggplot(wine, aes(x = "price")) +
    scale_x_continuous(trans='log2') +
    theme(axis_text_x=element_text(rotation=270, hjust=1)) +
    geom_histogram() +
    xlab("Price") +
    ylab("Count") +
    theme(subplots_adjust={'left': .1, 'bottom': 0.2}))
    
# p.draw()
```

---

# &lt;br&gt; Data Exploration 

&lt;br&gt;

## Wine Varieties

--


```python
# How many types are represented?
variety_count = pd.value_counts(wine.variety.values)

# How many varieties have been rated at least 1000 times?
np.sum(variety_count &gt; 1000)
```

```
## 24
```

```python
variety_count = variety_count[variety_count &gt; 1000]

wine = wine[wine.variety.isin(variety_count.keys())]
wine.shape
```

```
## (92852, 15)
```

---

# &lt;br&gt; Data Exploration 

## Wine Rating

--


```python
# What is the average number points per variety?
(wine.points.groupby(wine.variety).describe().sort_values("mean",
  ascending = False))[:10]
```

```
##                             count       mean       std  ...   50%   75%    max
## variety                                                 ...                   
## Nebbiolo                   2331.0  90.331188  2.748415  ...  90.0  92.0   99.0
## Grüner Veltliner           1145.0  90.015721  2.279760  ...  90.0  92.0   96.0
## Champagne Blend            1211.0  89.645747  2.982182  ...  90.0  92.0  100.0
## Riesling                   4971.0  89.439147  2.855625  ...  89.0  91.0   98.0
## Pinot Noir                12785.0  89.409230  3.131741  ...  90.0  92.0   99.0
## Syrah                      4086.0  89.290749  3.046863  ...  90.0  92.0  100.0
## Rhône-style Red Blend      1404.0  89.133903  2.828027  ...  89.0  91.0   98.0
## Portuguese Red             2196.0  88.864299  2.997764  ...  88.0  91.0  100.0
## Bordeaux-style Red Blend   5340.0  88.792135  3.075173  ...  89.0  91.0  100.0
## Sangiovese                 2377.0  88.612958  2.835852  ...  88.0  90.0  100.0
## 
## [10 rows x 8 columns]
```

---

# &lt;br&gt; Data Exploration 

&lt;br&gt;

## Who are the wine tasters?


```python

# How many tasters?
taster_counts = pd.value_counts(wine['taster_name'].values)
taster_counts[:10]
```

```
## Roger Voss            14641
## Michael Schachner     10239
## Virginie Boone         8532
## Paul Gregutt           8435
## Kerin O’Keefe          6523
## Matt Kettmann          5206
## Sean P. Sullivan       4258
## Anna Lee C. Iijima     3722
## Joe Czerwinski         3692
## Jim Gordon             3439
## dtype: int64
```

---

# &lt;br&gt; Data Exploration

&lt;br&gt;
## Subsetting / Filtering

--


```python
# Let's get the individuals with at least 1000 tastings.
keep_tasters = taster_counts[taster_counts &gt; 1000]

wine = wine[wine.taster_name.isin(keep_tasters.keys())]

(wine.points.groupby(wine.taster_name).describe().sort_values("mean",
  ascending = False))[:5]
```

```
##                    count       mean       std   min   25%   50%   75%    max
## taster_name                                                                 
## Anne Krebiehl MW  2499.0  90.785914  2.300700  80.0  89.0  91.0  92.0   97.0
## Matt Kettmann     5206.0  90.122359  2.633234  81.0  88.0  90.0  92.0   97.0
## Virginie Boone    8532.0  89.306259  3.026332  80.0  87.0  90.0  91.0   99.0
## Kerin O’Keefe     6523.0  89.200675  2.601344  81.0  87.0  89.0  91.0  100.0
## Paul Gregutt      8435.0  89.133966  2.825336  80.0  87.0  89.0  91.0  100.0
```

---

# &lt;br&gt; Pricing Wine

&lt;br&gt;

## A Linear Regression

--


```python
# What is the assocation between price and points?
import statsmodels.formula.api as sm

fit = sm.ols(formula = "points ~ price", data = wine).fit()

ols_summary = fit.summary() # Try this yourself to see the output
```

---

# &lt;br&gt; Pricing Wine

&lt;br&gt;

## Another Linear Regression

--


```python
np.sort(wine.variety.unique())

# Is there an interaction with variety?
```

```
## array(['Bordeaux-style Red Blend', 'Cabernet Franc', 'Cabernet Sauvignon',
##        'Champagne Blend', 'Chardonnay', 'Grüner Veltliner', 'Malbec',
##        'Merlot', 'Nebbiolo', 'Pinot Grigio', 'Pinot Gris', 'Pinot Noir',
##        'Portuguese Red', 'Red Blend', 'Rhône-style Red Blend', 'Riesling',
##        'Rosé', 'Sangiovese', 'Sauvignon Blanc', 'Sparkling Blend',
##        'Syrah', 'Tempranillo', 'White Blend', 'Zinfandel'], dtype=object)
```

```python
fit = sm.ols(formula = "points ~ log_price + variety + price:variety", \
  data = wine).fit()
ols_summary = fit.summary() # Ommited for slide real estate.
```

---

# &lt;br&gt; Pricing Wine

&lt;br&gt;

--

## Which wines are the best buy?


```python
# Which wine is the most overpriced?
wine = wine.assign(resid = fit.resid)
wine = wine.assign(fitted = fit.fittedvalues)
under_priced = wine[wine.resid == np.max(wine.resid)]
under_priced.keys()
```

```
## Index(['country', 'description', 'designation', 'points', 'price', 'province',
##        'region_1', 'region_2', 'taster_name', 'taster_twitter_handle', 'title',
##        'variety', 'winery', 'country_cat', 'log_price', 'resid', 'fitted'],
##       dtype='object')
```

---

# &lt;br&gt; Pricing Wine

&lt;br&gt;

## Which wines are the best buy (cont'd)?


```python
under_priced.values
```

```
## array([['Italy',
##         "This gorgeous, fragrant wine opens with classic Sangiovese scents of violet, rose, perfumed red berry, new leather and a whiff of baking spice. The elegant, radiant palate delivers crushed Marasca cherry, ripe strawberry, cinnamon, black tea and a hint of pipe tobacco. Firm, ultrafine tannins and bright acidity offer an age-worthy structure and impeccable balance. It's already stunning but will evolve for decades. Drink 2020–2050.",
##         'Riserva', 100, 550.0, 'Tuscany', 'Brunello di Montalcino', nan,
##         'Kerin O’Keefe', '@kerinokeefe',
##         'Biondi Santi 2010 Riserva  (Brunello di Montalcino)',
##         'Sangiovese', 'Biondi Santi', 'Italy', 6.309918278226516,
##         8.620905854558387, 91.37909414544161]], dtype=object)
```

---

# &lt;br&gt; Pricing Wine

&lt;br&gt;

## Which ones are the worst?


```python
over_priced = wine[wine.resid == np.min(wine.resid)]
over_priced.values
```

```
## array([['Chile',
##         'Jammy berry aromas come in front of green, vegetal notes. The palate is round and lacks balancing acidity.',
##         'El Principal Andetelmo', 81, 90.0, 'Maipo Valley', nan, nan,
##         'Michael Schachner', '@wineschach',
##         'Viña el Principal 2013 El Principal Andetelmo Red (Maipo Valley)',
##         'Bordeaux-style Red Blend', 'Viña el Principal', 'Chile',
##         4.499809670330265, -11.19866222294631, 92.19866222294631]],
##       dtype=object)
```

---

# &lt;br&gt; R's R6 Object System

&lt;br&gt;

--

## Python's object are standard in object oriented programming

&lt;br&gt;

--

## R has a similar system called R6

&lt;br&gt;

--

## Methods and attributes are associated with an environment

&lt;br&gt;

--

## Instead of `.` , we use `$`.

---


# &lt;br&gt; R's R6 Object System

--


```r
library(R6)
AddOneToList &lt;- R6Class(
  "AddOneToList",
  public = list(
      initialize = function(lst) {
        private$lst &lt;- lst
        self$greet()
      },
      add_one = function() {
        stop("Method is abstract")
      },
      get_lst = function() {
        stop("Method is abstract")
      },
      greet = function() {
        cat(paste0("Abstract add one to list created", ".\n"))
      }
    ),
  private = list(
    lst = NULL
  )
)
```

---

# &lt;br&gt; R's R6 Object System

&lt;br&gt;

## Let's try to instantiate an object

&lt;br&gt;


```r
lst_adder &lt;- AddOneToList$new(as.list(1:5))
```

```
## Abstract add one to list created.
```

```r
lst_adder$add_one()
```

```
## Error in lst_adder$add_one(): Method is abstract
```

---

# &lt;br&gt; R's R6 Object System


```r
AddOneToNumericList &lt;- R6Class("AddOneToNumericList",
  inherit = AddOneToList,
  public = list(
    initialize = function(lst) {
      #browser()
      if (!all(is.numeric(unlist(lst)))) {
        stop("All values should be numeric.")
      }
      super$initialize(lst)
    },
    add_one = function() {
      private$lst &lt;- lapply(private$lst, function(x) x + 1)
    },
    get_lst = function() {
      private$lst
    },
    greet = function() {
      cat(paste0("Concrete add one to list created", ".\n"))
    }
  )
)
```

---

# &lt;br&gt; R's R6 Object System

&lt;br&gt;

## Let's instantiate a proper concrete object


```r
lst_adder &lt;- AddOneToNumericList$new(as.list(letters[1:5]))
```

```
## Error in initialize(...): All values should be numeric.
```

```r
lst_adder &lt;- AddOneToNumericList$new(as.list(1:5))
```

```
## Concrete add one to list created.
```

```r
lst_adder$add_one()

unlist(lst_adder$get_lst())
```

```
## [1] 2 3 4 5 6
```
---

# &lt;br&gt; Calling Python from R

&lt;br&gt;

--

## R mirrors Pythons object through the R6 class system

&lt;br&gt;

--

## We've created Python code that does something useful

&lt;br&gt;

--

- We'd like to be able to reuse the code and objects created.

--

&lt;br&gt;

- We'd like to use R to augment our analysis.


---

# &lt;br&gt; Calling Python from R 

&lt;br&gt;

## Sourcing a Python file

```r
# R
source_python("part-4.py", convert = FALSE)

ls()[1:10]
```

```
##  [1] "AddOneToList"        "AddOneToNumericList" "aes"                
##  [4] "annotate"            "annotation_logticks" "annotation_stripes" 
##  [7] "arrow"               "as_labeller"         "coord_cartesian"    
## [10] "coord_equal"
```

---

# &lt;br&gt; Calling Python from R

&lt;br&gt;

## Get the column names of the wine data set into R


```r
library(dplyr)

col_keys &lt;- wine$keys()$to_list() %&gt;% 
  py_to_r()

col_keys
```

```
##  [1] "country"               "description"           "designation"          
##  [4] "points"                "price"                 "province"             
##  [7] "region_1"              "region_2"              "taster_name"          
## [10] "taster_twitter_handle" "title"                 "variety"              
## [13] "winery"                "country_cat"           "log_price"            
## [16] "resid"                 "fitted"
```

---

# &lt;br&gt; Calling Python from R

## Now read the Pandas data frame into R as a `tibble`



```r
# R
library(tibble)
library(DT)

handle_nan_and_unlist &lt;- function(x) {
  x &lt;- unlist(x)
  x[is.nan(x)] &lt;- NA
  x
}

wine_df &lt;- wine[as.list(setdiff(col_keys, "country_cat"))] %&gt;%
  py_to_r() %&gt;%
  mutate_if(is.list, handle_nan_and_unlist) %&gt;%
  as_tibble()
```

---

# &lt;br&gt; Calling Python from R

## Now read the Pandas data frame into R as a `tibble`



```r
wine_df %&gt;% 
  head(n = 100) %&gt;% 
  datatable()
```

<div id="htmlwidget-343413b325e375fa4c78" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-343413b325e375fa4c78">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],["Portugal","US","US","France","US","US","US","Germany","Argentina","Argentina","US","Italy","US","US","Italy","Italy","US","US","Chile","US","Chile","US","US","Italy","US","France","US","France","France","US","US","France","US","US","US","US","Germany","Australia","US","Australia","US","Germany","US","US","US","Austria","US","Italy","US","US","US","US","Chile","Italy","Italy","Italy","US","Italy","US","Italy","Italy","US","US","US","Italy","South Africa","South Africa","France","US","US","US","US","Germany","US","US","US","US","US","Germany","Portugal","Italy","France","US","US","Chile","Chile","US","US","US","Germany","Germany","Chile","US","New Zealand","Chile","France","Chile","Chile","Australia","France"],["This is ripe and fruity, a wine that is smooth while still structured. Firm tannins are filled out with juicy red berry fruits and freshened with acidity. It's  already drinkable, although it will certainly be better from 2016.","Tart and snappy, the flavors of lime flesh and rind dominate. Some green pineapple pokes through, with crisp acidity underscoring the flavors. The wine was all stainless-steel fermented.","Much like the regular bottling from 2012, this comes across as rather rough and tannic, with rustic, earthy, herbal characteristics. Nonetheless, if you think of it as a pleasantly unfussy country wine, it's a good companion to a hearty winter stew.","This has great depth of flavor with its fresh apple and pear fruits and touch of spice. It's off dry while balanced with acidity and a crisp texture. Drink now.","Soft, supple plum envelopes an oaky structure in this Cabernet, supported by 15% Merlot. Coffee and chocolate complete the picture, finishing strong at the end, resulting in a value-priced wine of attractive flavor and immediate accessibility.","Slightly reduced, this wine offers a chalky, tannic backbone to an otherwise juicy explosion of rich black cherry, the whole accented throughout by firm oak and cigar box.","Building on 150 years and six generations of winemaking tradition, the winery trends toward a leaner style, with the classic California buttercream aroma cut by tart green apple. In this good everyday sipping wine, flavors that range from pear to barely ripe pineapple prove approachable but not distinctive.","Zesty orange peels and apple notes abound in this sprightly, mineral-toned Riesling. Off dry on the palate, yet racy and lean, it's a refreshing, easy quaffer with wide appeal.","Baked plum, molasses, balsamic vinegar and cheesy oak aromas feed into a palate that's braced by a bolt of acidity. A compact set of saucy red-berry and plum flavors features tobacco and peppery accents, while the finish is mildly green in flavor, with respectable weight and balance.","Raw black-cherry aromas are direct and simple but good. This has a juicy feel that thickens over time, with oak character and extract becoming more apparent. A flavor profile driven by dark-berry fruits and smoldering oak finishes meaty but hot.","A sleek mix of tart berry, stem and herb, along with a hint of oak and chocolate, this is a fair value in a widely available, drink-now Oregon Pinot. The wine oak-aged for six months, whether in neutral or re-staved is not indicated.","Delicate aromas recall white flower and citrus. The palate offers passion fruit, lime and white peach with a hint of mineral alongside bright acidity.","This wine from the Geneseo district offers aromas of sour plums and just enough cigar box to tempt the nose. The flavors are a bit flat at first, then the acidity and tension of sour cherries emerges in the midpalate, bolstered by some black licorice.","Oak and earth intermingle around robust aromas of wet forest floor in this vineyard-designated Pinot that hails from a high-elevation site. Small in production, it offers intense, full-bodied raspberry and blackberry steeped in smoky spice and smooth texture.","Pretty aromas of yellow flower and stone fruit lead the nose. The bright palate offers yellow apple, apricot, vanilla and delicate notes of lightly toasted oak alongside crisp acidity.","Aromas suggest mature berry, scorched earth, animal, toast and anise. The palate offers ripe black berry, oak, espresso, cocoa and vanilla alongside dusty tannins.","As with many of the Erath 2010 vineyard designates, this is strongly herbal. The notes of leaf and herb create somewhat unripe flavor impressions, with a touch of bitterness on the finish. The fruit just passes the ripeness of sweet tomatoes.","A stiff, tannic wine, this slowly opens and brings brambly berry flavors into play, along with notes of earthy herbs. There's a touch of bitterness to the tannins.","A berry aroma comes with cola and herb notes. The palate is tangy and racy, and it delivers raspberry and plum flavors, with a modest finish.","This is weighty, creamy and medium to full in body. It has plenty of lime and pear flavors, plus slight brown sugar and vanilla notes.","Lightly herbal strawberry and raspberry aromas are authentic and fresh. On the palate, this is light and juicy, with snappy, lean flavors of red fruit and dry spice. The finish is dry and oaky.","Aromas of cranberry, barrel spice and herb are followed by tart cranberry flavors with grainy tannins. It falls a bit flat and the variety seems hard to discern.","Syrupy and dense, this wine is jammy in plum and vanilla, with indeterminate structure and plenty of oak. Ripe and full-bodied, it has accents of graphite and leather.","This densely hued wine has aromas of black plum and vanilla that carry over to the simple palate along with a touch of cedar. Pliant tannins give it an easygoing nature. Drink soon.","The aromas are brooding, with notes of barrel spice and cherry. The flavors are tart and elegant in style, with lightly gritty tannins backing them up. Best suited to the dinner table.","This fat, yeasty Champagne is comprised predominantly of Pinot Noir. It has ripe red berry fruit, light acidity and a soft, creamy aftertaste. It's ready to drink.","There are intriguing touches to the nose of this bottling, with jasmine, sea salt, wet hay, quinine and rainy sidewalk. The structure on the sip is quite delicate, with golden apple and honey flavors.","From the warm 2015 vintage, this is a soft and fruity wine. It's open with broad white fruit flavors, the acidity lighter than usual for Chablis, giving it a particularly ripe character. Drink now.","This soft, rounded wine is ripe with generous pear and melon flavors. It's easy and ready to drink young for its smooth, attractively ripe character.","A blend of Merlot and Cabernet Franc, this wine brings disjointed lightly volatile aromas of wood spice, vanilla and cherry. The plump cherry flavors are rounded out by woody barrel notes.","Very deep in color and spicy-smoky in flavor, this full-bodied wine is packed with dark-fruit flavors like blackberry and blueberry. Aromas like grilled beef and spicy flavors like cardamom and smoke give it a bold character that's hard to deny.","This cooperative, based in Aÿ, has benefited from the fine Pinot Noir in the village to produce a ripe red fruited wine. With balanced acidity and a soft aftertaste, it is ready to drink.","Aromas of vanilla, char and toast lead to light creamy stone fruit and canned-corn flavors. It provides appeal but the oak seems overweighted.","Big oak defines this robustly dense and extracted red, swimming in vanilla and cherry flavor. Full-bodied and gravelly in texture, it's a rustically pleasant wine for pizza nights and crowds.","Juicy plum, raspberry and pencil lead lead the way in this vineyard designate, a site that's 2,000 feet high. Tobacco and cedar meet a full-bodied hit of oak and puckering tannin, the wine still youthfully wrapped in its full-bodied boldness.","This is made from equal parts Cabernet Franc and Merlot, with small additions of Malbec. Juicy, it reveals a raisiny quality of ripeness around integrated oak and generous tannin.","Earthy pollen and mineral notes lend a savory tone to this medium-sweet Riesling. It's soft and slightly pulpy, intensified by overripe tangerine and stone fruit flavors. Drink now through 2018.","This medium-bodied Chardonnay features aromas of pineapple and roasted cashew. Similar notes of ripe pineapple and nuts mark the palate, then ease to a rather soft, easy finish. Drink now.","Some rosés are made simply by bleeding the juice from the fermenter, to concentrate the remaining wine. Whether or not that is the case here, the wine has the simple pleasant lightly candied strawberry flavors one might expect from such a technique. It's fruity and undemanding. Drink up.","Pale copper in hue, this wine exudes passion fruit on the nose, while the palate delivers nuances of muskmelon as well. It's crisp, racy and medium in body, perfectly suited to summertime refreshment. Drink now.","A healthy addition of 13% Petite Sirah provides added weight and intensity to this wine, a soft, supple and richly conceived combination of smoky black fruit and mocha.","Pronounced dust, pollen and earth tones lend savoriness to this otherwise citrusy wine. Racy acidity and fresh tangerine and lemon flavors turn herbal on the finish. Drink now.","Softened tannins surround a light-bodied, lean and herbal approach to this vineyard-designate, dotted in black pepper, leather and baked cherry.","This blend of Sangiovese, Malbec, Cabernet Sauvignon, Petite Sirah and other varieties plays well to type. It shows a wealth of ripe, dusty black fruit that's richly round and soft on the palate, approachable and lightly oaked.","This wine has a touch of perceptible sweetness on its tropical nose, yet tastes dry, showing a straightforward approach to this crisp, coastal-grown variety. Apricot, melon and guava wrap around a lightness of body and texture.","Freshness characterizes the nose: green pear, ivy leaves and citrus notes play on nose and palate. This is light footed, easy drinking and charming. Drink soon while flavors are fresh.","A wisp of bramble extends a savory tone from nose to finish on this otherwise bright bristling wine. Delicate honey tones register as off dry on the palate but balance neatly alongside flavors of freshly pressed apples and pears. The finish is marked by a touch of pencil lead. Drink now through 2020.","Forest floor, menthol, espresso, cranberry and pressed violet aromas take shape in the glass. The lean linear palate shows dried sour cherry, licorice and coffee bean alongside assertive close-grained tannins. Even though the tannins are still firm, drink sooner rather than later to capture the remaining fruit.","This blends 20% each of all five red-Bordeaux varieties, showing grapy, plummy flavor that's juicy and soft on the palate. With a core of tobacco, tar and graphite, it complements the fruity with the savory, ending simply and elegantly.","Fresh apple, lemon and pear flavors are accented by a hint of smoked nuts in this bold, full-bodied Pinot Gris. Rich and a bit creamy in mouthfeel yet balanced briskly, it's a satisfying white with wide pairing appeal. Drink now through 2019.","Dusty mineral, smoke and struck flint lend a savory tone to this lean light-bodied Riesling. Off dry in style, the palate offers delicately concentrated flavors of red apple and nectarine off set by tangerine acidity. Drink now through 2021.","Intensely smoky tones of struck flint and ash extend throughout this otherwise bright nimble Riesling. The palate boasts freshly pressed apple and pear flavors accentuated by zippy lemon-lime acidity. Drink now through 2021.","A bright nose with green apple and citric aromas comes with mild oak. This is acidic and racy in composition, with roundness along the edges of the palate. Apple and nectarine flavors are lightly oaked and salty, while this holds form on a high-acid finish.","Made with 65% Sangiovese, 20% Merlot and 15% Cabernet Sauvignon, this has subtle aromas of black-skinned fruit and thyme. The easygoing palate delivers black cherry and cinnamon alongside smooth tannins.","Made predominantly with Trebbiano and Malvasia, along with Pinot Bianco, Pinot Grigio and Riesling Renano, this has inviting aromas of ripe orchard fruit and citrus. The round fruity palate doles out ripe apricot, orange zest and juicy pineapple.","A blend of Cabernet Sauvignon, Merlot, Cabernet Franc and Sangiovese, this pleasant red has aromas of dark-skinned fruit, toast and a whiff of espresso. The light-bodied, straightforward palate offers cherry, red currant and a hint of light spice alongside zesty acidity and polished tannins.","Lots of spearmint, coyote mint, hot licorice, ginger snaps and Dr Pepper spice up the strawberry fruit of this wine that provides a very herbal take on the grape. Oregano, marjoram, thyme and dill all make a showing on the sip, against a backbone of sweet cherry and blackberry fruit, finishing on cedar.","An easy-drinking blend of Merlot, Sangiovese and Cabernet Sauvignon, this opens with aromas of red berry, toast, herb and roasted coffee bean. The soft palate offers black cherry, mocha and a hint of coffee alongside bright acidity and silky tannins. Drink now.","This 100% varietal wine opens in a heady aroma of leather pouch, clove and marshmallow. Both herbaceous and tannic, it begs for more time in the bottle or substantial swirling in the glass.","Made with 90% Merlot and 10% Alicante, this easygoing red opens with delicate aromas suggesting red currant and baking spice. The straightforward palate delivers red plum and clove alongside soft tannins. Enjoy soon.","Made with Vermentino, Malvasia di Candia Aromatica and Petit Manseng, this easy-drinking white has aromas of fragrant white wild flower, citrus and white stone fruit. The ripe round palate offers apricot, lime and a hint of saline.","Tar, dried meat, olallieberry and sharp cedar aromas show on this blend of 51% Cabernet Sauvignon and 49% Merlot. Dried strawberries and plums mix with thyme and dried rose petals on the palate.","Poached pears, yellow apples and a touch of butter show on the classic nose of this Chardonnay that holds to steely frame. Very sharp acidity kicks off the sip, where Pink Lady apples and warm vanilla surround a tight minerality. It's both sharp and slightly sweet.","Baked red cherry, crushed clove, iron and rose petals make for standard aromas on this bottling, although they are fairly light and simple here. There is a sizzle of acitity on the palate, where juicy strawberry and olallieberry flavors are easy to enjoy, made more complex by graphite and cedar touches.","A blend of 50% Cabernet Sauvignon, 30% Merlot and 20% Sangiovese, this offers aromas of black currant, caramel and mocha. The dense palate delivers toast, leather and cedar alongside teeth-coating tannins that grip the finish.","Etienne Le Riche is a total Cabernet specialist. With a tiny production of 5,000 cases across all his wines, this is boutique in the best sense. The Reserve Cabernets are, of course, the stars. This 2003 is fruit and wood driven, a powerful but still elegant wine, with black plums, tannins and super-ripe fruits.","A Cabernet-dominated (98%) wine, which boasts a dense, concentrated tannic structure. Flavors of cassis underly this, while the wood spices contribute their ribbon of flavor. This is an impressive wine, the flagship red from this estate founded by Spatz Sperling over 30 years ago.","This wine's black cherry and plum flavors veer dangerously toward prune—no doubt a product of the exceedingly hot summer. It's creamy and supple in texture, adding just enough tobacco, vanilla and smoke for complexity. But for all the fruit and ripeness, it finishes with great elegance and precision. Drink now–2020. Imported by Acadia Imports.","Thick and brooding, this dark, sweetly tannic wine also offers higher-toned elements of cedar, dried herb and graphite. It finds its balance amid a full-bodied density of fruit concentration and girth of structure. Drink now through 2023.","Cooked cranberry is spiced with anise, peppercorn and roasted beef slices on this bottling from a vineyard planted by three brothers who are longtime Salinas Valley farmers. The palate shows dark cranberry and raspberry, spiced up by chopped sage, thyme and bay leaf.","There's a touch of hot asphalt, pencil lead and miso on the nose of this first vintage from a promising, well-funded project, with dark elderberry fruit and dried dill rounding out the aromas. The palate blends a gamy beef quality with oregano, marjoram, cooked strawberry, baked blackberry and a sesame-oil character.","Black cherry, black plum and black currant are integrated well into the fresh dill and smoke scents on the nose of this wine from one of the region's newest properties. It discloses a rich dark-chocolate sauce character on the palate as well as black-currant-jelly flavors, but most impressive is the lush, sexy and soft mouthfeel.","Crisp, pristine peach and apricot notes resonate through the nose and palate of this fresh, blossomy dry Riesling. While zesty and lithe in body, ripe grapefruit and melon flavors feel supple and silky on the palate. Drink now through 2019.","Smashed blackberry and blueberry fruit are enhanced by burned caramel, heavy slate and touches of soy and smoke on the nose. There's great depth in both body and flavors once sipped, with a layer of fine-grained tannins revealing teriyaki, black plum, boysenberry and touches of lavender.","This wine shows off Yountville fruit at its finest, starting with a floral component to the nose. Spicy, bright and lifted, it coats the palate in ripe berry and cherry, ending with a snap of vanilla.","From a promising new project, the nose of this wine is linear and focused, with black raspberry, black licorice, cola, wet sagebrush and rain-on-slate scents. The tactile acidity once sipped creates a fascinating soft buzz on the tongue, with flavors of dried mint, brisk raspberry and cherry tomato. Camphor and eucalyptus add intrigue on the finish.","Dark and thick in the glass, this wine shows strong but not bitter tar notes on the nose plus charred beef in a blueberry glaze, wet campfire, bourbon barrel and vanilla. The structure is massive now, gooey with thick tannins and flavors of espresso bean and condensed purple flowers. Judicious acidity ensures strong cellaring potential. Drink 2018–2027.","Bradley Brown's appellation blend is a nice entry point to this exciting winery. This wine shows lavish smoked black currant and plum flavors, with aromatically lifting spices of anise and black pepper and a savory roast-beef element. The palate packs lots of pepper and relies on plump black cherry, boysenberry and a dark-chocolate syrup richness.","Approachably fruity yet nuanced and electrifying, there's exceptional value here. High-intensity flavors of tangerine and stone fruit sweeten the palate, balanced by nerve-tingling acidity and deep ripples of slate, salt and honeycomb. It's an intensely zesty wine, but the finish has length and power.","From an estate in the south of the Alentejo, this is a rich, hot-country wine. It is firm, densely structured and with solid, dark tannins. There is a juicy black fruit background to this dense wine that gives a lift. Still young, this dark and very concentrated wine will be better from 2018.","Baked plum, Asian spice, vanilla and menthol aromas carry the nose. The elegantly structured palate offers fleshy black cherry, licorice, mint and well-integrated French oak alongside fine-grained tannins that lend firm, polished support. A coffee note marks the finish.","Low-yield vines on the best parcels of the Vincens estate are the source of this wine. It is super-rich and concentrated, maybe too much in its opulent excess. The wine does have great plum and berry flavors that are generous and full in the mouth. The wine even now is still young and will be better from 2018.","A hearty blend of 76% Zinfandel and 24% Petite Sirah, this bottling packs a wallop of cinnamon-stick on the nose as well as strawberry puree, licorice and black pepper. Clove, allspice, and nutmeg arise immediately on the sip, backed by baked plum and bay leaf notes.","More complex than the winery's appellation blend, yet also requiring time to reach full potential, this shows delicate lemon slices, honeysuckle, surf wax, pink grapefruit and a touch of coconut on the nose. The palate is grippy in texture and sizzling with mouthwatering acidity, offering lemon rind, grapefruit spritz and petrol flavors. Expect inviting nut and honey-dust flavors to emerge. Drink 2018–2034.","This blend of Cabernet Sauvignon, Syrah and Merlot opens with blackened aromas of charred oak and creosote, but it quickly sheds that oak-heavy character to display toasty flavors of olives, herbs and berry fruits. All together, this is a classic Chilean red blend, with fine tannins and patented lightly herbal, balsamic flavors. Drink through 2020.","Dry, briary aromas of field brush, black olive, herbs, berry fruits and saucy tomato are textbook Maipo. This is fresh, a touch choppy, and not overly heavy. Flavors of cassis, plum and vanilla carry over to the finish, which is fresh and bolstered by fine natural acidity. Drink through 2022.","The addition of 15% Petite Sirah takes this bottling to a compelling place, showing barely ripe blackberries, animal fat, smoke, black pepper and a wild clove element on the nose. It's rich and layered on the palate, where chalky tannins support black cherry, grilled beef and mint flavors. This has the bones to last awhile.","A fairly elegant expression of the variety, this wine is bright in cherry kirsch and pretty aromas of rose petal and lavender, structured to age and enjoy with food. Rector Creek Vineyard is just north of Yountville and planted in rocky alluvial soils. Drink now through 2022.","This wine is put together from multiple vineyard sources, including the well-known Morelli Lane and Widdoes, all farmed by the Duttons. Larger in production than many of the vineyard-designates, it offers baked bread and juicy overtones of cranberry-raspberry layered atop luxuriously toasted oak. It'll show well at the table.","Fresh and fragrant of blossoms, tart yellow peach and apricot, this off-dry Riesling maintains a crystalline fruit purity that persists throughout Fritz Haag's wines. It's invigorating and irresistably quaffable. The long, melon-rind finish is lip smacking.","Just a touch of honey-lemon sweetness is enough to make this zesty, citrus-focused Riesling lip smackingly delicious. Fresh, green herb and lime notes reverberate through a strong finish. Drinks well now but should meld nicely over the next five years.","Dry, spicy aromas of tobacco, cedar, vanilla and berry fruits come together nicely. This Maule Valley Cab is fresh and harmonious across the palate, with nothing too pushy. Complex, balsamic flavors of olives, herbs, dried berries, turned earth and cocoa finish dry, peppery and elegant. Drink through 2019.","This wine is bursting with gorgeous cherry fruit, forward and luscious. The tannins are ripe and the acids in perfect proportion, keeping the fruit flavors buoyed upon a textural ride into a lingering finish.","The Stoneleigh style traditionally favors ripeness over herbaceousness, and the 2008 holds true to form, offering up grapefruit and nectarine aromas and an appealing blend of citrus and stone-fruit flavors. It's plump and round, yet finishes fresh. Good as an apéritif or with light dishes.","Haven't seen this unusual combination of grapes in quite some time, and you know what, it's much better now than when we last saw it in 2001. This vintage has a nice, almost magnetic nose, while the palate is firm and well structured, with cassis, black cherry, coffee and licorice flavors. It's a bit boring on the finish, but the mouthfeel and length are just fine. Fruity, rich and balanced. 325 cases made.","The impact of 50-year old vines is seen in the concentrated fruit, ripe and full,  in this wine. The flavors are of fresh apricots, edged with green apples and pink grapefruit, a combination that shows both richness and great freshness. The finish is a reminder of the fine acidity in 2006.","Bisquertt usually does well with its value-priced Merlots, and seeing that 2007 was an excellent vintage in Chile, this wine excels in the value price range. The nose is dark and saturated, but pure and inviting. And the palate is ripe and smooth, with spice, plum, blackberry and herb notes, particularly anise. Finishes clean, smooth and peppery. Drink now.","Clean and honest up front, with moderate richness and modest telltale Casablanca pineapple aromas. The plate is creamier than many wines in this price range, with flavors of apple cider, citrus and some pith. Overall this is a good value wine with enough citrus and acidity to qualify it as fresh.","From the little-known region of Padthaway, this Cabernet starts off with some very promising, perfumed aromas of mint and cassis, but then shows touches of chocolate and raisined fruit on the palate. It's soft and mouthfilling—an easy-drinking Cab to consume on the young side.","A citrus-dominated wine, lime and lemon giving a crisp intensity. There is a somewhat bitter toast element, but the acidity, the fresh fruits and the soft structure act as a counter-balance. Give it six months to a year. Screwcap."],["Avidagos","NaN","Vintner's Reserve Wild Child Block","Les Natures","Mountain Cuvée","NaN","NaN","Devon","Felix","Winemaker Selection","NaN","Ficiligno","Signature Selection","King Ridge Vineyard","Dalila","Mascaria Barricato","Hyland","NaN","NaN","NaN","Reserve","NaN","Estate","Prugneto","Alder Ridge Vineyard","Brut Rosé","Golden Horn","NaN","NaN","Inspired","NaN","Brut Rosé","NaN","Old Vine","Bella Vetta Vineyard","The Cypher","NaN","Made With Organic Grapes","Rosé of","Jester Sangiovese","Classic","Undone Dry","Blau Vineyards","Siena","NaN","NaN","Ingle Vineyard","Dono Riserva","Intreccio Library Selection","NaN","Red Oak Vineyard","Yellow Dog Vineyard","Single Vineyard Falaris Hill","Nativo","Villa Antinori","Castiglioni","J.D. Hurley","Le Volte","Wolff Vineyard","Semifonte","Poetico","BDX","NaN","Estate","Toscano","Cabernet Sauvignon Reserve","Grand Reserve","NaN","K Block","Guidotti Vineyard","Family Reserve","Family Reserve","Dry","Destruction Level","Ruth's Reach","Estate Reserve","Old 900","NaN","Graacher Himmelreich Spätlese","Grande Reserva Tinto","Bellezza Gran Selezione","NaN","Mr. Nibbles","Claiborne Vineyard","Condesa Real Premium Blend","20 Barrels","NaN","Rector Creek Vineyard","Dutton Ranch","Brauneberger Feinherb","NaN","The 7th Generation Gran Reserva Estate Bottled","NaN","NaN","Unusual Cabernet-Shiraz-Zinfandel","Les Vénérables Vieilles Vignes","Casa La Joya Reserve","Natura","The Trial of John Montford","NaN"],[87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,86,86,86,85,85,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,88,88,88,88,88,88,88,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,88,88,88,88,87,87,87],[15,14,65,27,19,34,12,24,30,13,20,19,22,69,13,17,50,22,9,14,13,55,100,17,25,58,26,24,15,46,12,55,12,40,75,75,9,18,25,20,24,10,55,23,18,12,20,30,75,18,20,20,18,16,14,30,26,30,85,15,19,18,18,44,80,45,30,50,85,64,68,68,16,35,25,55,46,36,14,26,38,35,35,28,29,32,28,95,44,30,22,20,38,19,50,27,11,11,30,35],["Douro","Oregon","Oregon","Alsace","California","California","California","Mosel","Other","Mendoza Province","Oregon","Sicily &amp; Sardinia","California","California","Sicily &amp; Sardinia","Sicily &amp; Sardinia","Oregon","Oregon","Maule Valley","California","Maipo Valley","Washington","California","Central Italy","Washington","Champagne","California","Burgundy","Burgundy","Washington","California","Champagne","Washington","California","California","California","Rheinhessen","South Australia","Oregon","South Australia","California","Rheinhessen","California","California","California","Burgenland","New York","Tuscany","California","New York","New York","New York","Leyda Valley","Tuscany","Tuscany","Tuscany","California","Tuscany","California","Tuscany","Tuscany","California","California","California","Tuscany","Stellenbosch","Simonsberg-Stellenbosch","Bordeaux","California","California","California","California","Rheinhessen","California","California","California","California","California","Mosel","Alentejano","Tuscany","Southwest France","California","California","Aconcagua Valley","Maipo Valley","California","California","California","Mosel","Mosel","Loncomilla Valley","Oregon","Marlborough","Maipo Valley","Burgundy","Colchagua Valley","Casablanca Valley","South Australia","Burgundy"],["NaN","Willamette Valley","Willamette Valley","Alsace","Napa Valley","Alexander Valley","Central Coast","NaN","Cafayate","Mendoza","Oregon","Sicilia","Paso Robles","Sonoma Coast","Terre Siciliane","Cerasuolo di Vittoria","McMinnville","Willamette Valley","NaN","North Coast","NaN","Columbia Valley (WA)","Napa Valley","Romagna","Columbia Valley (WA)","Champagne","Santa Ynez Valley","Chablis","Mâcon-Milly Lamartine","Columbia Valley (WA)","California","Champagne","Columbia Valley (WA)","Alexander Valley","Howell Mountain","Napa Valley","NaN","South Australia","Eola-Amity Hills","McLaren Vale","Napa Valley","NaN","Knights Valley","Sonoma County","Sonoma Coast","NaN","Finger Lakes","Morellino di Scansano","Napa Valley","Finger Lakes","Finger Lakes","Finger Lakes","NaN","Toscana","Toscana","Toscana","Santa Clara Valley","Toscana","Yountville","Toscana","Toscana","Paso Robles","Paso Robles","Central Coast","Toscana","NaN","NaN","Saint-Émilion","Spring Mountain District","Santa Lucia Highlands","Santa Ynez Valley","Santa Ynez Valley","NaN","Monterey","Napa Valley","Carmel Valley","Paso Robles","Santa Cruz Mountains","NaN","NaN","Chianti Classico","Cahors","Paso Robles","Edna Valley","NaN","NaN","Paso Robles","Napa Valley","Russian River Valley","NaN","NaN","NaN","Willamette Valley","NaN","NaN","Chablis","NaN","NaN","Padthaway","St.-Romain"],["NaN","Willamette Valley","Willamette Valley","NaN","Napa","Sonoma","Central Coast","NaN","NaN","NaN","Oregon Other","NaN","Central Coast","Sonoma","NaN","NaN","Willamette Valley","Willamette Valley","NaN","North Coast","NaN","Columbia Valley","Napa","NaN","Columbia Valley","NaN","Central Coast","NaN","NaN","Columbia Valley","California Other","NaN","Columbia Valley","Sonoma","Napa","Napa","NaN","NaN","Willamette Valley","NaN","Napa","NaN","Sonoma","Sonoma","Sonoma","NaN","Finger Lakes","NaN","Napa","Finger Lakes","Finger Lakes","Finger Lakes","NaN","NaN","NaN","NaN","Central Coast","NaN","Napa","NaN","NaN","Central Coast","Central Coast","NaN","NaN","NaN","NaN","NaN","Napa","Central Coast","Central Coast","Central Coast","NaN","Central Coast","Napa","Central Coast","Central Coast","Central Coast","NaN","NaN","NaN","NaN","Central Coast","Central Coast","NaN","NaN","Central Coast","Napa","Sonoma","NaN","NaN","NaN","Willamette Valley","NaN","NaN","NaN","NaN","NaN","NaN","NaN"],["Roger Voss","Paul Gregutt","Paul Gregutt","Roger Voss","Virginie Boone","Virginie Boone","Matt Kettmann","Anna Lee C. Iijima","Michael Schachner","Michael Schachner","Paul Gregutt","Kerin O’Keefe","Matt Kettmann","Virginie Boone","Kerin O’Keefe","Kerin O’Keefe","Paul Gregutt","Paul Gregutt","Michael Schachner","Virginie Boone","Michael Schachner","Sean P. Sullivan","Virginie Boone","Kerin O’Keefe","Sean P. Sullivan","Roger Voss","Matt Kettmann","Roger Voss","Roger Voss","Sean P. Sullivan","Jim Gordon","Roger Voss","Sean P. Sullivan","Virginie Boone","Virginie Boone","Virginie Boone","Anna Lee C. Iijima","Joe Czerwinski","Paul Gregutt","Joe Czerwinski","Virginie Boone","Anna Lee C. Iijima","Virginie Boone","Virginie Boone","Virginie Boone","Anne Krebiehl MW","Anna Lee C. Iijima","Kerin O’Keefe","Virginie Boone","Anna Lee C. Iijima","Anna Lee C. Iijima","Anna Lee C. Iijima","Michael Schachner","Kerin O’Keefe","Kerin O’Keefe","Kerin O’Keefe","Matt Kettmann","Kerin O’Keefe","Virginie Boone","Kerin O’Keefe","Kerin O’Keefe","Matt Kettmann","Matt Kettmann","Matt Kettmann","Kerin O’Keefe","Roger Voss","Roger Voss","Joe Czerwinski","Virginie Boone","Matt Kettmann","Matt Kettmann","Matt Kettmann","Anna Lee C. Iijima","Matt Kettmann","Virginie Boone","Matt Kettmann","Matt Kettmann","Matt Kettmann","Anna Lee C. Iijima","Roger Voss","Kerin O’Keefe","Roger Voss","Matt Kettmann","Matt Kettmann","Michael Schachner","Michael Schachner","Matt Kettmann","Virginie Boone","Virginie Boone","Anna Lee C. Iijima","Anna Lee C. Iijima","Michael Schachner","Paul Gregutt","Joe Czerwinski","Michael Schachner","Roger Voss","Michael Schachner","Michael Schachner","Joe Czerwinski","Roger Voss"],["@vossroger","@paulgwine ","@paulgwine ","@vossroger","@vboone","@vboone","@mattkettmann","NaN","@wineschach","@wineschach","@paulgwine ","@kerinokeefe","@mattkettmann","@vboone","@kerinokeefe","@kerinokeefe","@paulgwine ","@paulgwine ","@wineschach","@vboone","@wineschach","@wawinereport","@vboone","@kerinokeefe","@wawinereport","@vossroger","@mattkettmann","@vossroger","@vossroger","@wawinereport","@gordone_cellars","@vossroger","@wawinereport","@vboone","@vboone","@vboone","NaN","@JoeCz","@paulgwine ","@JoeCz","@vboone","NaN","@vboone","@vboone","@vboone","@AnneInVino","NaN","@kerinokeefe","@vboone","NaN","NaN","NaN","@wineschach","@kerinokeefe","@kerinokeefe","@kerinokeefe","@mattkettmann","@kerinokeefe","@vboone","@kerinokeefe","@kerinokeefe","@mattkettmann","@mattkettmann","@mattkettmann","@kerinokeefe","@vossroger","@vossroger","@JoeCz","@vboone","@mattkettmann","@mattkettmann","@mattkettmann","NaN","@mattkettmann","@vboone","@mattkettmann","@mattkettmann","@mattkettmann","NaN","@vossroger","@kerinokeefe","@vossroger","@mattkettmann","@mattkettmann","@wineschach","@wineschach","@mattkettmann","@vboone","@vboone","NaN","NaN","@wineschach","@paulgwine ","@JoeCz","@wineschach","@vossroger","@wineschach","@wineschach","@JoeCz","@vossroger"],["Quinta dos Avidagos 2011 Avidagos Red (Douro)","Rainstorm 2013 Pinot Gris (Willamette Valley)","Sweet Cheeks 2012 Vintner's Reserve Wild Child Block Pinot Noir (Willamette Valley)","Jean-Baptiste Adam 2012 Les Natures Pinot Gris (Alsace)","Kirkland Signature 2011 Mountain Cuvée Cabernet Sauvignon (Napa Valley)","Louis M. Martini 2012 Cabernet Sauvignon (Alexander Valley)","Mirassou 2012 Chardonnay (Central Coast)","Richard Böcking 2013 Devon Riesling (Mosel)","Felix Lavaque 2010 Felix Malbec (Cafayate)","Gaucho Andino 2011 Winemaker Selection Malbec (Mendoza)","Acrobat 2013 Pinot Noir (Oregon)","Baglio di Pianetto 2007 Ficiligno White (Sicilia)","Bianchi 2011 Signature Selection Merlot (Paso Robles)","Castello di Amorosa 2011 King Ridge Vineyard Pinot Noir (Sonoma Coast)","Stemmari 2013 Dalila White (Terre Siciliane)","Terre di Giurfo 2011 Mascaria Barricato  (Cerasuolo di Vittoria)","Erath 2010 Hyland Pinot Noir (McMinnville)","Hawkins Cellars 2009 Pinot Noir (Willamette Valley)","Sundance 2011 Merlot (Maule Valley)","Souverain 2010 Chardonnay (North Coast)","Tres Palacios 2011 Reserve Pinot Noir (Maipo Valley)","Mellisoni 2014 Malbec (Columbia Valley (WA))","Okapi 2013 Estate Cabernet Sauvignon (Napa Valley)","Podere dal Nespoli 2015 Prugneto Sangiovese (Romagna)","Ram 2014 Alder Ridge Vineyard Cabernet Franc (Columbia Valley (WA))","Roland Champion NV Brut Rosé  (Champagne)","Sevtap 2015 Golden Horn Sauvignon Blanc (Santa Ynez Valley)","Simonnet-Febvre 2015  Chablis","Vignerons des Terres Secrètes 2015  Mâcon-Milly Lamartine","Basel Cellars 2013 Inspired Red (Columbia Valley (WA))","Cocobon 2014 Red (California)","Collet NV Brut Rosé  (Champagne)","Drumheller 2014 Chardonnay (Columbia Valley (WA))","Eco Terreno 2013 Old Vine Cabernet Sauvignon (Alexander Valley)","Hindsight 2013 Bella Vetta Vineyard Cabernet Sauvignon (Howell Mountain)","Mulvane Wine Co. 2013 The Cypher Red (Napa Valley)","Schmitt Söhne 2015 Riesling (Rheinhessen)","Yalumba 2016 Made With Organic Grapes Chardonnay (South Australia)","Z'IVO 2015 Rosé of Pinot Noir (Eola-Amity Hills)","Mitolo 2016 Jester Sangiovese Rosé (McLaren Vale)","Napa Cellars 2014 Classic Zinfandel (Napa Valley)","P.J. Valckenberg 2015 Undone Dry Riesling (Rheinhessen)","Passaggio 2014 Blau Vineyards Merlot (Knights Valley)","Ferrari-Carano 2014 Siena Red (Sonoma County)","Folie à Deux 2015 Pinot Gris (Sonoma Coast)","Fuchs 2015 Grüner Veltliner (Burgenland)","Heron Hill 2015 Ingle Vineyard Riesling (Finger Lakes)","Serpaia di Endrizzi 2010 Dono Riserva  (Morellino di Scansano)","Soquel Vineyards 2013 Intreccio Library Selection Red (Napa Valley)","Ventosa 2015 Pinot Gris (Finger Lakes)","Lamoreaux Landing 2014 Red Oak Vineyard Riesling (Finger Lakes)","Lamoreaux Landing 2014 Yellow Dog Vineyard Riesling (Finger Lakes)","Leyda 2015 Single Vineyard Falaris Hill Chardonnay (Leyda Valley)","Madonna Alta 2014 Nativo Red (Toscana)","Marchesi Antinori 2015 Villa Antinori White (Toscana)","Marchesi de' Frescobaldi 2014 Castiglioni Red (Toscana)","Martin Ranch 2014 J.D. Hurley Zinfandel (Santa Clara Valley)","Ornellaia 2014 Le Volte Red (Toscana)","Piña 2013 Wolff Vineyard Cabernet Sauvignon (Yountville)","Podere Ciona 2014 Semifonte Red (Toscana)","Poggioventoso 2015 Poetico White (Toscana)","Pull 2012 BDX Red (Paso Robles)","Pull 2013 Chardonnay (Paso Robles)","Rideau 2014 Estate Syrah","Tenuta Forconi 2013 Toscano Red (Toscana)","Le Riche 2003 Cabernet Sauvignon Reserve Cabernet Sauvignon (Stellenbosch)","Delheim 2001 Grand Reserve Cabernet Sauvignon (Simonsberg-Stellenbosch)","Lassègue 2003  Saint-Émilion","Terra Valentine 2013 K Block Cabernet Sauvignon (Spring Mountain District)","Testarossa 2013 Guidotti Vineyard Pinot Noir (Santa Lucia Highlands)","Vincent Vineyards 2010 Family Reserve Cabernet Sauvignon (Santa Ynez Valley)","Vincent Vineyards 2012 Family Reserve Cabernet Sauvignon (Santa Ynez Valley)","Weingut Liebfrauenstift 2014 Dry Riesling (Rheinhessen)","Wrath 2013 Destruction Level Red (Monterey)","Yardstick 2013 Ruth's Reach Cabernet Sauvignon (Napa Valley)","Albatross Ridge 2012 Estate Reserve Pinot Noir (Carmel Valley)","Alta Colina 2012 Old 900 Syrah (Paso Robles)","Big Basin 2013 Syrah (Santa Cruz Mountains)","Carl Graff 2014 Graacher Himmelreich Spätlese Riesling (Mosel)","Casa Santa Vitória 2013 Grande Reserva Tinto Red (Alentejano)","Castello di Gabbiano 2012 Bellezza Gran Selezione  (Chianti Classico)","Château Vincens 2012 Malbec (Cahors)","Chronic Cellars 2013 Mr. Nibbles Red (Paso Robles)","Claiborne &amp; Churchill 2014 Claiborne Vineyard Riesling (Edna Valley)","Conde de Velázquez 2012 Condesa Real Premium Blend Red (Aconcagua Valley)","Cono Sur 2012 20 Barrels Cabernet Sauvignon (Maipo Valley)","Dracaena 2013 Cabernet Franc (Paso Robles)","Duckhorn 2012 Rector Creek Vineyard Merlot (Napa Valley)","Dutton-Goldfield 2014 Dutton Ranch Pinot Noir (Russian River Valley)","Fritz Haag 2014 Brauneberger Feinherb Riesling (Mosel)","Fritz Haag 2014 Riesling (Mosel)","G7 2012 The 7th Generation Gran Reserva Estate Bottled Cabernet Sauvignon (Loncomilla Valley)","Le Cadeau 2014 Pinot Noir (Willamette Valley)","Stoneleigh 2008 Sauvignon Blanc (Marlborough)","TerraMater 2006 Unusual Cabernet-Shiraz-Zinfandel Red (Maipo Valley)","La Chablisienne 2006 Les Vénérables Vieilles Vignes  (Chablis)","Viña Bisquertt 2007 Casa La Joya Reserve Merlot (Colchagua Valley)","Emiliana 2008 Natura Chardonnay (Casablanca Valley)","Henry's Drive Vignerons 2006 The Trial of John Montford Cabernet Sauvignon (Padthaway)","Bertrand Ambroise 2006  St.-Romain"],["Portuguese Red","Pinot Gris","Pinot Noir","Pinot Gris","Cabernet Sauvignon","Cabernet Sauvignon","Chardonnay","Riesling","Malbec","Malbec","Pinot Noir","White Blend","Merlot","Pinot Noir","White Blend","Red Blend","Pinot Noir","Pinot Noir","Merlot","Chardonnay","Pinot Noir","Malbec","Cabernet Sauvignon","Sangiovese","Cabernet Franc","Champagne Blend","Sauvignon Blanc","Chardonnay","Chardonnay","Bordeaux-style Red Blend","Red Blend","Champagne Blend","Chardonnay","Cabernet Sauvignon","Cabernet Sauvignon","Bordeaux-style Red Blend","Riesling","Chardonnay","Pinot Noir","Rosé","Zinfandel","Riesling","Merlot","Red Blend","Pinot Gris","Grüner Veltliner","Riesling","Sangiovese","Bordeaux-style Red Blend","Pinot Gris","Riesling","Riesling","Chardonnay","Red Blend","White Blend","Red Blend","Zinfandel","Red Blend","Cabernet Sauvignon","Red Blend","White Blend","Bordeaux-style Red Blend","Chardonnay","Syrah","Red Blend","Cabernet Sauvignon","Cabernet Sauvignon","Bordeaux-style Red Blend","Cabernet Sauvignon","Pinot Noir","Cabernet Sauvignon","Cabernet Sauvignon","Riesling","Rhône-style Red Blend","Cabernet Sauvignon","Pinot Noir","Syrah","Syrah","Riesling","Portuguese Red","Sangiovese","Malbec","Red Blend","Riesling","Red Blend","Cabernet Sauvignon","Cabernet Franc","Merlot","Pinot Noir","Riesling","Riesling","Cabernet Sauvignon","Pinot Noir","Sauvignon Blanc","Red Blend","Chardonnay","Merlot","Chardonnay","Cabernet Sauvignon","Chardonnay"],["Quinta dos Avidagos","Rainstorm","Sweet Cheeks","Jean-Baptiste Adam","Kirkland Signature","Louis M. Martini","Mirassou","Richard Böcking","Felix Lavaque","Gaucho Andino","Acrobat","Baglio di Pianetto","Bianchi","Castello di Amorosa","Stemmari","Terre di Giurfo","Erath","Hawkins Cellars","Sundance","Souverain","Tres Palacios","Mellisoni","Okapi","Podere dal Nespoli","Ram","Roland Champion","Sevtap","Simonnet-Febvre","Vignerons des Terres Secrètes","Basel Cellars","Cocobon","Collet","Drumheller","Eco Terreno","Hindsight","Mulvane Wine Co.","Schmitt Söhne","Yalumba","Z'IVO","Mitolo","Napa Cellars","P.J. Valckenberg","Passaggio","Ferrari-Carano","Folie à Deux","Fuchs","Heron Hill","Serpaia di Endrizzi","Soquel Vineyards","Ventosa","Lamoreaux Landing","Lamoreaux Landing","Leyda","Madonna Alta","Marchesi Antinori","Marchesi de' Frescobaldi","Martin Ranch","Ornellaia","Piña","Podere Ciona","Poggioventoso","Pull","Pull","Rideau","Tenuta Forconi","Le Riche","Delheim","Lassègue","Terra Valentine","Testarossa","Vincent Vineyards","Vincent Vineyards","Weingut Liebfrauenstift","Wrath","Yardstick","Albatross Ridge","Alta Colina","Big Basin","Carl Graff","Casa Santa Vitória","Castello di Gabbiano","Château Vincens","Chronic Cellars","Claiborne &amp; Churchill","Conde de Velázquez","Cono Sur","Dracaena","Duckhorn","Dutton-Goldfield","Fritz Haag","Fritz Haag","G7","Le Cadeau","Stoneleigh","TerraMater","La Chablisienne","Viña Bisquertt","Emiliana","Henry's Drive Vignerons","Bertrand Ambroise"],[2.70805020110221,2.63905732961526,4.17438726989564,3.29583686600433,2.94443897916644,3.52636052461616,2.484906649788,3.17805383034795,3.40119738166216,2.56494935746154,2.99573227355399,2.94443897916644,3.09104245335832,4.23410650459726,2.56494935746154,2.83321334405622,3.91202300542815,3.09104245335832,2.19722457733622,2.63905732961526,2.56494935746154,4.00733318523247,4.60517018598809,2.83321334405622,3.2188758248682,4.06044301054642,3.25809653802148,3.17805383034795,2.70805020110221,3.8286413964891,2.484906649788,4.00733318523247,2.484906649788,3.68887945411394,4.31748811353631,4.31748811353631,2.19722457733622,2.89037175789616,3.2188758248682,2.99573227355399,3.17805383034795,2.30258509299405,4.00733318523247,3.13549421592915,2.89037175789616,2.484906649788,2.99573227355399,3.40119738166216,4.31748811353631,2.89037175789616,2.99573227355399,2.99573227355399,2.89037175789616,2.77258872223978,2.63905732961526,3.40119738166216,3.25809653802148,3.40119738166216,4.44265125649032,2.70805020110221,2.94443897916644,2.89037175789616,2.89037175789616,3.78418963391826,4.38202663467388,3.80666248977032,3.40119738166216,3.91202300542815,4.44265125649032,4.15888308335967,4.21950770517611,4.21950770517611,2.77258872223978,3.55534806148941,3.2188758248682,4.00733318523247,3.8286413964891,3.58351893845611,2.63905732961526,3.25809653802148,3.63758615972639,3.55534806148941,3.55534806148941,3.3322045101752,3.36729582998647,3.46573590279973,3.3322045101752,4.55387689160054,3.78418963391826,3.40119738166216,3.09104245335832,2.99573227355399,3.63758615972639,2.94443897916644,3.91202300542815,3.29583686600433,2.39789527279837,2.39789527279837,3.40119738166216,3.55534806148941],[-1.02367892865992,-0.154831519535122,-4.22031085481939,-2.68035690571131,-0.0743972978045662,-1.63682032407645,1.23863738408157,-2.48479110395687,-1.78068427126297,0.963634538019576,-0.313771359197958,-0.370767840115036,-0.371347548903032,-4.41824455868887,0.645447745447527,-0.294689444576321,-4.35072954004691,-1.62966785384316,1.00816303503979,-1.28192963179633,-0.885982497336343,-4.76984279669888,-5.53335692608429,-1.06800131165276,-2.13165132226376,-3.7074744287835,-2.91043332903703,-2.10212140953921,-0.514918634939605,-3.83246392240601,-0.480124194538817,-3.54203114647342,0.238637384081571,-3.07317350542523,-4.76094851852667,-5.16137081309476,-0.65882859039678,-1.13061873341988,-2.05335936341281,-1.60839984360551,-2.24678740346396,-0.96239301483061,-3.81068508393501,-0.00161669584851154,-0.121215113069908,-0.059684651343332,-0.959486742028872,-0.356264064403305,-3.16137081309476,-0.121215113069908,-1.95948674202887,-1.95948674202887,-0.13061873341988,-0.152910055776218,0.446997848507749,-1.62300172574518,-1.46455992008133,-1.62300172574518,-4.09700374473552,-0.00197745105575109,-0.370767840115036,-0.281821881519036,-0.13061873341988,-3.44571127487578,-3.91681186167202,1.61058639579734,2.69923490213237,0.940867081338638,-0.0970037447355168,-0.168923708251285,0.502122762030893,0.502122762030893,2.68343383687956,1.06650492448564,3.18875690170101,0.333373965307885,0.421667286929875,1.15298795990125,3.06816411361393,1.08904020016061,2.10757499129981,1.71343876655465,2.01649476076147,1.07107038641567,2.45628192389979,2.52595300134118,2.61978996075462,-0.265686789291394,1.07296196952274,0.872288317134689,1.76590583322246,3.78788340846742,1.55886519303046,0.303759216871811,-1.81764084349952,-0.49987485092133,2.4739400612675,1.53247490019035,-1.30076509786763,-2.37624444443831],[88.0236789286599,87.1548315195351,91.2203108548194,89.6803569057113,87.0743972978046,88.6368203240765,85.7613626159184,89.4847911039569,88.780684271263,86.0363654619804,87.313771359198,87.370767840115,87.371347548903,91.4182445586889,86.3545522545525,87.2946894445763,90.3507295400469,87.6296678538432,84.9918369649602,86.2819296317963,85.8859824973363,90.7698427966989,91.5333569260843,87.0680013116528,88.1316513222638,89.7074744287835,88.910433329037,88.1021214095392,86.5149186349396,89.832463922406,86.4801241945388,89.5420311464734,85.7613626159184,89.0731735054252,90.7609485185267,91.1613708130948,86.6588285903968,87.1306187334199,88.0533593634128,87.6083998436055,88.246787403464,86.9623930148306,89.810685083935,88.0016166958485,88.1212151130699,88.0596846513433,88.9594867420289,88.3562640644033,91.1613708130948,88.1212151130699,88.9594867420289,88.9594867420289,87.1306187334199,87.1529100557762,86.5530021514923,88.6230017257452,88.4645599200813,88.6230017257452,91.0970037447355,87.0019774510558,87.370767840115,87.281821881519,87.1306187334199,90.4457112748758,90.916811861672,89.3894136042027,88.3007650978676,90.0591329186614,91.0970037447355,91.1689237082513,90.4978772379691,90.4978772379691,88.3165661631204,89.9334950755144,87.811243098299,90.6666260346921,90.5783327130701,89.8470120400987,87.9318358863861,89.9109597998394,88.8924250087002,89.2865612334454,88.9835052392385,89.9289296135843,88.5437180761002,88.4740469986588,88.3802100392454,91.2656867892914,89.9270380304773,90.1277116828653,89.2340941667775,87.2121165915326,89.4411348069695,87.6962407831282,89.8176408434995,88.4998748509213,85.5260599387325,85.4675250998096,88.3007650978676,89.3762444444383]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>country<\/th>\n      <th>description<\/th>\n      <th>designation<\/th>\n      <th>points<\/th>\n      <th>price<\/th>\n      <th>province<\/th>\n      <th>region_1<\/th>\n      <th>region_2<\/th>\n      <th>taster_name<\/th>\n      <th>taster_twitter_handle<\/th>\n      <th>title<\/th>\n      <th>variety<\/th>\n      <th>winery<\/th>\n      <th>log_price<\/th>\n      <th>resid<\/th>\n      <th>fitted<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,5,14,15,16]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>

---

# &lt;br&gt; Calling Python from R

&lt;br&gt;

## What about our numerical routines?


```r
import("numpy", as = "np")
```

```
## Module(numpy)
```

```r
ols_code &lt;- '
def ols(Y, X):
  q, r = np.linalg.qr(X)
  return(np.linalg.inv( r ).dot( q.T ).dot( Y ))
'

writeLines(ols_code, "ols_code.py")
source_python("ols_code.py", convert = FALSE)
```

---

# &lt;br&gt; Calling Python from R

## What about our numerical routines?


```r
form &lt;- points ~ log_price + variety + price:variety
wine_mf &lt;- model.frame(form, wine_df) 
X &lt;- model.matrix(form, wine_mf)
Y &lt;- matrix(wine_mf$points, ncol = 1)

fit &lt;- ols(X, Y)$flatten() %&gt;%  py_to_r()
names(fit) &lt;- colnames(X)
fit[1:10]
```

```
##               (Intercept)                 log_price     varietyCabernet Franc 
##              0.0112567969              0.0379463013              0.0001536870 
## varietyCabernet Sauvignon    varietyChampagne Blend         varietyChardonnay 
##              0.0009329323              0.0001703754              0.0012528949 
##   varietyGrüner Veltliner             varietyMalbec             varietyMerlot 
##              0.0001790393              0.0003876218              0.0003037841 
##           varietyNebbiolo 
##              0.0002769390
```

---

# &lt;br&gt; Wrapping up

&lt;br&gt;

## Python has modeled most of it's data science libraries after R

&lt;br&gt;

## Python's programming constructs although distinct provide a new twist 
## on familar method of programming

&lt;br&gt;

## If you can understand the syntax you can figure out how to use the libraries

&lt;br&gt;

## If you want, you can do this from R

---

&lt;style type="text/css"&gt;
.huge {
  font-size: 200%;
}
&lt;/style&gt;

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
.center[
.huge[
You made it to the end of the class. Thanks very much!
]
]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
